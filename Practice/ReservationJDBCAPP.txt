
create table reservation(
    reservation_id int auto_increment,
    passenger_name varchar2(30), 
    flight_name varchar2(30), 
    seat_number varchar2(10),
    travel_class varchar(20), 
    primary key(reservation_id)
    );
    
// insert into reservation(passenger_name,flight_name,seat_number,travel_class) values('rohit','AI303','6A', 'Economy');   
// insert into reservation(passenger_name,flight_name,seat_number,travel_class) values('kishore','6E650','13B', 'First');   
    

=================================================

package com.examly;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.util.Scanner;

public class AirlineReservationApp {

    public static void main(String[] args) {

        Scanner sc = new Scanner(System.in);
        try (Connection con = getConnection();) {
            processMenu(con, sc);
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
    }

    public static Connection getConnection() {
        String url = "jdbc:mysql://localhost/appdb";
        String username = "root";
        String password = "examly";
        Connection con = null;
        try {
            con = DriverManager.getConnection(url, username, password);
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
        return con;
    }

    public static void insertReservation(Connection con, Scanner sc) {
        System.out.println("Enter Reservation ID"); // 4001 to 4005 preloaded
        int reservationId = Integer.parseInt(sc.nextLine());
        System.out.println("Enter Passenger Name:");
        String passengerName = sc.nextLine();
        System.out.println("Enter Flight Name:");
        String flightName = sc.nextLine();
        System.out.println("Enter Seat Number:");
        String seatNumber = sc.nextLine();
        System.out.println("Enter Travel Class");
        String travelClass = sc.nextLine();

        if (flightName.equals("Flight 404")) {
            System.out.println("Reservation not allowed for Flight 404.");
            return;
        }
        if (!(travelClass.equals("Economy") || travelClass.equals("Bussiness") || travelClass.equals("First"))) {
            System.out.println("Invalid travel class.");
            return;
        }

        try {
            String selectSql = "select * from reservation where seat_number = ? and flight_name = ?";
            PreparedStatement ps1 = con.prepareStatement(selectSql);
            ps1.setString(1, seatNumber);
            ps1.setString(2, flightName);

            ResultSet rs1 = ps1.executeQuery();
            if (rs1.next()) {
                System.out.println("Seat already booked for this flight.");
            } else {
                String insertSql = "insert into reservation values(?,?,?,?,?)";

                PreparedStatement ps2 = con.prepareStatement(insertSql);
                ps2.setInt(1, reservationId);
                ps2.setString(2, passengerName);
                ps2.setString(3, flightName);
                ps2.setString(4, seatNumber);
                ps2.setString(5, travelClass);

                int rowsEffected = ps2.executeUpdate();
                if (rowsEffected > 0) {
                    System.out.println("Reservation added successfully!");
                }
            }
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
    }

    public static void displayAllReservations(Connection con) {
        String sql = "select * from reservation order by passenger_name desc";
        try (PreparedStatement st = con.prepareStatement(sql)) {
            ResultSet rs = st.executeQuery();
            while (rs.next()) {
                System.out.printf(
                        "Reservation: %d, CustomerName: %s, FlightName: %s, SeatNumber: %s, TravelClass: %s%n",
                        rs.getInt(1), rs.getString(2), rs.getString(3), rs.getString(4), rs.getString(5));

            }
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
    }

    public static void processMenu(Connection con, Scanner sc) {
        System.out.println("Enter choice: (1/2)");
        int choice = Integer.parseInt(sc.nextLine());
        try {
            switch (choice) {
                case 1:
                    insertReservation(con, sc);
                    break;
                case 2:
                    displayAllReservations(con);
                    break;
                default:
                    System.out.println("Invalid Choice");
            }
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
    }
}
